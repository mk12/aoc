# Copyright 2022 Marshall Lochbaum. Subject to the BSD Zero Clause License.
# This file is copied from https://github.com/mlochbaum/bqn-libs.

# Given strings â¥Šğ•¨ and ğ•©, return âŸ¨start_mask, keep_maskâŸ© for split.
MarkSplit â† (2âŒŠâ‰ âˆ˜âŠ£)â—¶{ğ•¤
  ! "Split: ğ•¨ can't be empty"
}â€¿{
  â‹ˆâŸœÂ¬ (âŸ¨âŸ©â¥Šğ•¨)=ğ•©
}â€¿{
  c â† (â‰ ğ•¨)-1                  # ğ•¨â·ğ•©      011000010011    (câ†3)
  i â† 0 (-âŸœ1âŒˆcÃ—<)` (â‰ ğ•©)â†‘ğ•¨â·ğ•©   # i        032100032103210
  âŸ¨c=i,1âŠ¸Â»âŠ¸âˆ§0=iâŸ©              # 1âŠ¸Â»âŠ¸âˆ§0=i 100001100000000
}

# Split string ğ•© on occurrences of separator ğ•¨, removing the separators.
Split â‡ (0<â‰ âˆ˜âŠ¢)â—¶âŸ¨
  â‹ˆâŠ¢
  (1+`âŠ¢)âŠ¸((1-ËœÃ—)âˆ¾Â¯1âŠâŠ£)Â´âˆ˜MarkSplitâŸ(0<â‰ âˆ˜âŠ¢) âŠ” âŠ¢
âŸ©
