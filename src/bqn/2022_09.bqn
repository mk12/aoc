# Copyright 2022 Mitchell Kember. Subject to the MIT License.
# Advent of Code 2022
# Day 9: Rope Bridge

⟨Lines, N⟩ ← •Import "common.bqn"

x ← >((N 2⊸↓)∾(∾⟜-=⌜˜↕2)⊏˜"DRUL"⊐⊑)¨ Lines "2022_09"

# TODO
S ← {
  ⟨h, ts⟩ ← 𝕩
  t ← ¯1⊏ts
  n ← ⊑𝕨
  d ← 1↓𝕨
  a ← 1++´d×t-h
#   •Show "Head"‿h‿"Tail"‿t‿"Dir"‿d‿"n"‿n‿"a"‿a
  ⟨h+n×d, ts∾(a↓h⊸+˘(↕n)×⌜d)⟩
}

# ⟨0‿0,[0‿0]⟩S˝⌽x


# Part 1
•Out ≠⍷1⊑⟨0‿0,[0‿0]⟩S˝⌽x

# Part 2
# •Out 2

#               ¯1      0       1
# . . .             | 0 0 0 |      
# . T .  ¯1         | 1 1 1 |      
# . . .             | 2 2 2 |      
#            -------+-------+-------
#             0 1 2 |       | 2 1 0
#         0   0 1 2 |       | 2 1 0
#             0 1 2 |       | 2 1 0
#            -------+-------+-------
#                   | 2 2 2 |      
#         1         | 1 1 1 |      
#                   | 0 0 0 |      

# a = (h-t)*x+1

# Farthest head goes:
# ¯65-490,¯227-100
