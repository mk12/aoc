# Copyright 2022 Mitchell Kember. Subject to the MIT License.
# Advent of Code 2022
# Day 8: Treetop Tree House

âŸ¨LinesâŸ© â† â€¢Import "common.bqn"

x â† '0'-Ëœ> Lines "2022_08"

# _quad â† {Fâ†ğ”½â‹„{FâŒ¾(âŒ½âŸğ•¨â‰âŸğ•©)x}âŒœËœâ†•2}

# Original.
# G â† {ğ•©âŠË˜(â†•â‰ ğ•©)-Â»(âŠ¢+âŠ£Ã—0=âŠ¢)`(â†•â‰ ğ•©)Ã—ğ•©â‰¥âŒœâ†•10}
Ga â† {ğ•©âŠË˜Ë˜(â†•â‰ ğ•©)-Â»(âŠ¢+âŠ£Ã—0=âŠ¢)`(â†•â‰ ğ•©)Ã—ğ•©â‰¥âŒœâ†•10}

# Rewritten tacitly, no perf difference.
# G â† âŠ¢âŠË˜(â†•â‰ )-Â·Â»Â·(âŠ¢+âŠ£Ã—0=âŠ¢)`(â†•â‰ )Ã—âŠ¢â‰¥âŒœ(â†•10)Ë™

# Rewritten to not need Ë˜.

# Part 1
â€¢Out +Â´â¥Šx>âŒŠÂ´â¥Š{(Â¯1Ë˜âŠ¸Â»âŒˆ`)âŒ¾(âŒ½âŸğ•¨â‰âŸğ•©)x}âŒœËœâ†•2

# Part 2
â€¢Out âŒˆÂ´â¥ŠÃ—Â´â¥Š{GaâŒ¾(âŒ½âŸğ•¨â‰âŸğ•©)x}âŒœËœâ†•2

###############

# (â†•â‰ x)âŠ¸Ã—Ë˜xâ‰¥âŒœâ†•10
# (â†•â‰ x)âŠ¸Ã—Ë˜(â‰x)â‰¥âŒœâ†•10  # transpose x before
# (â†•â‰ x)âŠ¸Ã—Ë˜1â‰xâ‰¥âŒœâ†•10   # tranpose 3d array after

# now, axes are:
# 0: row of forest
# 1: column of forest
# 2: 0-10 tree height

# but for â†•â‰ x to multiply cleanly, need leading axis agreement
# 0: column of forest
# 1: row of forest
# 2: 0-10 tree height
