# Copyright 2022 Mitchell Kember. Subject to the MIT License.
# Advent of Code 2022
# Day 9: Rope Bridge

âŸ¨Lines, NâŸ© â† â€¢Import "common.bqn"

x â† âˆ¾((â†•âˆ˜N 2âŠ¸â†“)âŠ¢âŒœ(âˆ¾âŸœ-=âŒœËœâ†•2)âŠËœ"RULD"âŠâŠ‘)Â¨ Lines "2022_09"

# Simulates dxâ€¿dy step ğ•¨, updating headâ€¿tails state ğ•©.
S â† {hâ€¿tâ†ğ•© â‹„ âŸ¨h+ğ•¨, hâˆ¾ËœâŸ(0>+Â´ğ•¨Ã—h-ËœÂ¯1âŠt)tâŸ©}

##### ` approach
H â† {
  hp â† ğ•¨
  t â† ğ•©
  d â† hp-t
  m â† âˆ¨Â´2â‰¤|d
  # t+mÃ—1âŒŠâŸœ-âŸ2 d
  t+mÃ—Â¯1âŒˆ1âŒŠd
}

S10 â† {
  posâ€¿hist â† ğ•©
  new â† H`ğ•¨âŠ¸+âŒ¾âŠ‘ pos
  âŸ¨new, histâˆ¾Â¯1âŠ‘newâŸ©
}

##### Ë approach

# TODO

# Part 1
â€¢Out â‰ â·1âŠ‘âŸ¨0â€¿0,[0â€¿0]âŸ©SËâŒ½x

# Part 2
â€¢Out â‰ â·1âŠ‘âŸ¨10â¥Š<0â€¿0,â†•0â€¿2âŸ©S10ËâŒ½x




# ###################################################################

# # w = h' - h
# # e = whether to append h (old), this is parallel all 10
# # e = 0 > +Â´ (h'-h)Ã—(t-h)
# #           h't - ht - h'h + h^2

# # helper that computes âŸ¨new h, new tâŸ© given ğ•© hâ€¿t and ğ•¨ dir
# # H â† {hâ€¿tâ†ğ•© â‹„ âŸ¨h+ğ•¨, hâŠ£âŸ(0>+Â´ğ•¨Ã—t-h)tâŸ©}

# # newhead H oldtailâ€¿oldhead gives newtail
# H â† {tâ€¿hâ†ğ•© â‹„ hâŠ£âŸ(0>+Â´(ğ•¨-h)Ã—t-h)t}

# # new value is [old value, old header, new head] ? old head : old value/unchagned

# # Simulates dxâ€¿dy step ğ•¨, updating \
# S10 â† {
#   # â€¢Show ğ•©
#   hâ€¿sâ€¿t â† ğ•© â‹„ d â† ğ•¨
#   hn â† h+ğ•¨
#   sn â† hn H` â€¢Show (âŠ¢â‰Ë˜hâŠ¸Â») s
#   â€¢Show "hn"â€¿hn
#   â€¢Show "sn"â€¿sn
#   âŸ¨hn, sn, tâˆ¾Â¯1âŠsnâŸ©
# }

# ###################################################################
